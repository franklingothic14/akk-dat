<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Artikeltrainer Akkusativ Dativ</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { 
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif; 
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      padding: 20px; 
    }
    .container { 
      background: white; 
      border-radius: 24px; 
      padding: 36px; 
      max-width: 580px; 
      width: 100%; 
      box-shadow: 0 25px 50px rgba(0,0,0,0.15); 
    }
    h1 { text-align: center; color: #111827; margin-bottom: 12px; font-size: 1.6em; font-weight: 700; }

    .header-controls {
      display: flex;
      justify-content: center;
      align-items: center;
      gap: 20px;
      margin-bottom: 24px;
      flex-wrap: wrap;
    }

    .toggle-container {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 0.9em;
      color: #6b7280;
      font-weight: 600;
    }

    .toggle-switch {
      position: relative;
      width: 44px;
      height: 24px;
      background: #e5e7eb;
      border-radius: 12px;
      cursor: pointer;
      transition: background 0.2s;
    }
    .toggle-switch.active { background: #8b5cf6; }

    .toggle-slider {
      position: absolute;
      top: 2px;
      left: 2px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
      transition: transform 0.2s;
      box-shadow: 0 1px 3px rgba(0,0,0,0.2);
    }
    .toggle-switch.active .toggle-slider { transform: translateX(20px); }

    .results-btn {
      padding: 10px 18px;
      border: 1px solid #d1d5db;
      border-radius: 10px;
      background: white;
      color: #374151;
      cursor: pointer;
      font-size: 0.9em;
      font-weight: 600;
      transition: all 0.2s;
    }
    .results-btn:hover { background: #f3f4f6; }

    #progress { text-align: center; color: #6b7280; margin-bottom: 24px; font-weight: 600; }

    .sentence { 
      font-size: 1.6em; 
      text-align: center; 
      margin-bottom: 16px; 
      padding: 28px 24px; 
      background: #f9fafb; 
      border-radius: 20px; 
      min-height: 100px; 
      display: flex; 
      align-items: center; 
      justify-content: center; 
      line-height: 1.4; 
    }

    .underline { 
      border-bottom: 4px solid #8b5cf6; 
      padding: 0 20px; 
      margin: 0 6px; 
      font-size: 1.4em; 
      font-weight: 600; 
    }

    .hint { 
      text-align: center; 
      color: #9ca3af; 
      margin-bottom: 24px; 
      font-style: italic; 
      font-size: 0.95em; 
      transition: opacity 0.3s, height 0.3s;
    }
    .hint.hidden { opacity: 0; height: 0; margin: 0; overflow: hidden; }

    .options { display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin-bottom: 24px; }

    .option { 
      padding: 16px 28px; 
      border: none; 
      border-radius: 12px; 
      background: #8b5cf6; 
      color: white; 
      cursor: pointer; 
      font-size: 1.1em; 
      transition: all 0.2s; 
      font-weight: 500; 
      min-width: 90px; 
    }
    .option:hover:not(.disabled) { background: #7c3aed; transform: translateY(-2px); }
    .option.correct { background: #22c55e; }
    .option.wrong { background: #ef4444; }
    .option.disabled { opacity: 0.6; cursor: default; }

    .feedback { text-align: center; min-height: 24px; margin-bottom: 24px; font-size: 1.1em; font-weight: 500; }

    .top-controls { display: flex; justify-content: center; margin-bottom: 20px; }
    .top-controls button { padding: 12px 28px; border: none; border-radius: 12px; background: #6b7280; color: white; cursor: pointer; font-size: 1em; font-weight: 500; }
    .top-controls button:hover { background: #4b5563; }

    .score { text-align: center; font-size: 1.2em; font-weight: 700; color: #111827; }

    .modal {
      display: none; position: fixed; inset: 0;
      background: rgba(0,0,0,0.5); z-index: 1000;
      align-items: center; justify-content: center;
    }
    .modal-content {
      background: white; border-radius: 16px; padding: 32px;
      max-width: 90vw; max-height: 80vh; overflow-y: auto; width: 600px;
    }
    .log-table { width: 100%; border-collapse: collapse; font-size: 0.9em; }
    .log-table th, .log-table td { padding: 12px 8px; border-bottom: 1px solid #e5e7eb; }
    .correct-log { color: #059669; font-weight: 600; }
    .wrong-log { color: #dc2626; font-weight: 600; }
    .close-btn { background: #ef4444; color: white; border: none; padding: 8px 16px; border-radius: 8px; cursor: pointer; float: right; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Artikeltrainer Akkusativ oder Dativ?</h1>

    <div class="header-controls">
      <div class="toggle-container">
        <label>Easy</label>
        <div class="toggle-switch active" id="toggle-switch">
          <div class="toggle-slider"></div>
        </div>
        <label>Hard</label>
      </div>
    </div>

    <div id="progress">Frage <span id="current">1</span> / <span id="total">10</span></div>
    <div id="sentence" class="sentence">Lade...</div>
    <div id="hint" class="hint"></div>
    <div id="options" class="options"></div>
    <div id="feedback" class="feedback"></div>

    <div class="top-controls">
      <button id="restart">Neu starten</button>
    </div>

    <div id="score" class="score">
      Punkte: <span id="score-val">0</span> / <span id="score-total">10</span>
    </div>

    <div style="text-align:center; margin-top:16px;">
      <button class="results-btn" id="results-btn" style="display:none;">
        Ergebnisse ansehen
      </button>
    </div>
  </div>

  <!-- RESULTS MODAL -->
  <div id="results-modal" class="modal">
    <div class="modal-content">
      <button class="close-btn" id="close-results">Schließen</button>
      <h2>Deine Ergebnisse</h2>
      <table class="log-table" id="log-table">
        <thead>
          <tr>
            <th>Frage</th>
            <th>Deine Antwort</th>
            <th>Richtige Antwort</th>
            <th>Status</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>
    </div>
  </div>

<script>
const questions = [
  { sentence: 'Ich sehe <span class="underline">Hund</span>.', options: ['der','den','dem','die'], answer: 'den', hint: 'Akkusativ (sehen)' },
  { sentence: 'Ich gebe <span class="underline">Frau</span> ein Buch.', options: ['der','die','dem','den'], answer: 'der', hint: 'Dativ (geben)' },
  { sentence: 'Ich gehe mit <span class="underline">Mann</span>.', options: ['der','den','dem'], answer: 'dem', hint: 'Dativ (mit)' },
  { sentence: 'Ich kaufe <span class="underline">Äpfel</span>.', options: ['die','den','dem'], answer: 'die', hint: 'Akkusativ Plural' },
  { sentence: 'Ich schreibe <span class="underline">Brief</span>.', options: ['ein','einen','dem'], answer: 'einen', hint: 'Akkusativ' },
  { sentence: 'Ich helfe <span class="underline">Kind</span>.', options: ['dem','das','den'], answer: 'dem', hint: 'Dativ (helfen)' },
  { sentence: 'Ich lege das Buch auf <span class="underline">Tisch</span>.', options: ['der','den','dem'], answer: 'den', hint: 'Akkusativ Richtung' },
  { sentence: 'Ich danke <span class="underline">Lehrerin</span>.', options: ['der','die','dem'], answer: 'der', hint: 'Dativ (danken)' },
  { sentence: 'Ich male <span class="underline">Haus</span>.', options: ['das','den','dem'], answer: 'das', hint: 'Akkusativ' },
  { sentence: 'Ich spreche mit <span class="underline">Freunden</span>.', options: ['die','den','dem'], answer: 'den', hint: 'Dativ Plural' }
];

let currentIndex = 0, score = 0, showHint = true, answerLog = [];

function startQuiz() {
  currentIndex = 0; score = 0; showHint = true; answerLog = [];
  document.getElementById('results-btn').style.display = 'none';
  updateToggle(); updateScore(); showQuestion();
}

function showQuestion() {
  const q = questions[currentIndex];
  document.getElementById('current').textContent = currentIndex + 1;
  document.getElementById('sentence').innerHTML = q.sentence;
  const hintEl = document.getElementById('hint');
  hintEl.textContent = q.hint;
  hintEl.classList.toggle('hidden', !showHint);

  const optsDiv = document.getElementById('options');
  optsDiv.innerHTML = '';
  q.options.forEach(opt => {
    const btn = document.createElement('button');
    btn.className = 'option';
    btn.textContent = opt;
    btn.onclick = () => handleAnswer(btn, opt);
    optsDiv.appendChild(btn);
  });
  document.getElementById('feedback').textContent = '';
}

function handleAnswer(button, selected) {
  const q = questions[currentIndex];
  const buttons = document.querySelectorAll('.option');
  buttons.forEach(b => { b.classList.add('disabled'); b.disabled = true; });
  buttons.forEach(b => { if (b.textContent === q.answer) b.classList.add('correct'); });

  const isCorrect = selected === q.answer;
  if (isCorrect) {
    score++;
    feedback('Richtig!', '#059669');
  } else {
    button.classList.add('wrong');
    feedback(`Falsch! Richtig ist: ${q.answer}`, '#dc2626');
  }

  answerLog.push({
    question: q.sentence.replace(/<[^>]*>/g, ''),
    userAnswer: selected,
    correctAnswer: q.answer,
    correct: isCorrect
  });

  document.getElementById('results-btn').style.display = 'inline-block';
  updateScore();

  setTimeout(() => {
    if (currentIndex < questions.length - 1) {
      currentIndex++; showQuestion();
    } else {
      alert(`Fertig! Punkte: ${score}/${questions.length}`);
    }
  }, 1200);
}

function feedback(msg, color) {
  const f = document.getElementById('feedback');
  f.textContent = msg;
  f.style.color = color;
}

function updateScore() {
  document.getElementById('score-val').textContent = score;
  document.getElementById('score-total').textContent = questions.length;
}

function updateToggle() {
  document.getElementById('toggle-switch').classList.toggle('active', showHint);
}

function showResults() {
  const tbody = document.querySelector('#log-table tbody');
  tbody.innerHTML = '';
  answerLog.forEach((log, i) => {
    const row = document.createElement('tr');
    row.innerHTML = `
      <td>${i + 1}. ${log.question}</td>
      <td>${log.userAnswer}</td>
      <td>${log.correctAnswer}</td>
      <td class="${log.correct ? 'correct-log' : 'wrong-log'}">
        ${log.correct ? '✓ Richtig' : '✗ Falsch'}
      </td>`;
    tbody.appendChild(row);
  });
  document.getElementById('results-modal').style.display = 'flex';
}

document.getElementById('restart').onclick = startQuiz;
document.getElementById('toggle-switch').onclick = () => { showHint = !showHint; updateToggle(); showQuestion(); };
document.getElementById('results-btn').onclick = showResults;
document.getElementById('close-results').onclick = () => document.getElementById('results-modal').style.display = 'none';
window.onclick = e => { if (e.target.id === 'results-modal') e.target.style.display = 'none'; };

window.onload = startQuiz;
</script>
</body>
</html>